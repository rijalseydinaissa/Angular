<div class="p-4 flex flex-col h-full">
  <!-- Filtres de date (version compacte) -->
  <div class="bg-white p-2 rounded-lg shadow-sm mb-2 border border-gray-200">
    <h2 class="text-lg font-bold mb-1 text-gray-800">Filtrer les commandes</h2>
    <form [formGroup]="filterForm" class="flex flex-wrap items-center gap-2">
      <div class="flex-1 min-w-[180px]">
        <select formControlName="filterType" class="w-full p-2 text-sm border rounded-lg focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
          <option value="all">Toutes les commandes</option>
          <option value="jour">Par jour</option>
          <option value="semaine">Cette semaine</option>
          <option value="mois">Ce mois</option>
          <option value="periode">Période personnalisée</option>
        </select>
      </div>
      
      <!-- Sélecteur de date pour le filtre par jour (plus compact) -->
      <ng-container *ngIf="filterForm.get('filterType')?.value === 'jour'">
        <div class="flex-1 min-w-[180px]">
          <input type="date" formControlName="dateJour" class="w-full p-2 text-sm border rounded-lg focus:ring-1 focus:ring-blue-500">
        </div>
      </ng-container>
      
      <!-- Dates début/fin pour période personnalisée (plus compactes) -->
      <ng-container *ngIf="filterForm.get('filterType')?.value === 'periode'">
        <div class="flex items-center gap-2 flex-1 min-w-[180px]">
          <input type="date" formControlName="dateDebut" placeholder="Date début" class="w-full p-2 text-sm border rounded-lg">
          <span class="text-gray-500">-</span>
          <input type="date" formControlName="dateFin" placeholder="Date fin" class="w-full p-2 text-sm border rounded-lg">
        </div>
      </ng-container>
      
      <!-- Bouton appliquer -->
      <!-- <button type="submit" class="bg-primary text-white p-2 rounded-lg text-sm hover:bg-primary-dark">
        Appliquer
      </button> -->
    </form>
  </div>

  <!-- Cards statistiques -->
  <div class="flex items-center justify-between w-full mt-1 mb-1">
    <app-stats-card
      *ngFor="let stat of stats"
      class="w-1/4 px-2"
      [title]="stat.title"
      [value]="stat.value"
      [icon]="stat.icon"
    ></app-stats-card>
  </div>

  <!-- Contenu principal (avec hauteur ajustée) -->
  <div class="flex flex-col md:flex-row w-full gap-4 mt-2" style="min-height: 400px; height: auto;">
    <!-- Recent Sales Section -->
    <div class="flex flex-col bg-primary rounded flex-1 p-2 text-white h-full overflow-auto">
      <p class="text-xl font-bold mb-2">Ventes Recentes</p>
      <div class="flex-grow overflow-auto">
        <table class="w-full">
          <thead class="sticky top-0 bg-primary z-10">
            <tr class="text-center">
              <th class="px-4 py-2">Date</th>
              <th class="px-4 py-2">Produit</th>
              <th class="px-4 py-2">Quantite</th>
              <th class="px-4 py-2">Prix</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let vente of ventes" class="hover:bg-primary-light">
              <td class="px-4 py-2">{{vente.date}}</td>
              <td class="px-4 py-2">{{vente.produit}}</td>
              <td class="px-4 py-2 text-center">{{vente.quantite}}</td>
              <td class="px-4 py-2 text-center">{{vente.prixUnitaire}}</td>
            </tr>
            <tr *ngIf="ventes.length === 0">
              <td colspan="4" class="px-4 py-2 text-center">Aucune vente pour cette période</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Products Section -->
    <div class="flex flex-col bg-secondary rounded p-2 text-white w-full md:w-1/3 h-full overflow-auto">
      <h1 class="text-2xl font-bold text-center mb-2">Produits</h1>
      <div class="flex-grow flex flex-col justify-between">
        <!-- Most Sold Products -->
        <div class="flex flex-col gap-1">
          <h3 class="text-xl font-bold text-green mb-2">Les plus vendues</h3>
          <div class="space-y-2">
            <div *ngFor="let produits of plusVendues"
              class="flex justify-between items-center p-2 hover:bg-secondary-light rounded">
              <p>{{produits.produit}}</p>
              <p>{{produits.quantite}}</p>
            </div>
          </div>
        </div>
        <!-- Running Low Products -->
        <div class="flex flex-col gap-1">
          <h3 class="text-xl font-bold text-red mb-2">Bientot terminee</h3>
          <div class="space-y-2">
            <div *ngFor="let termine of bientotTermine"
              class="flex justify-between items-center p-2 hover:bg-secondary-light rounded">
              <p>{{termine.produit}}</p>
              <p>{{termine.quantite}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>